<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>Windows軟體式磁碟陣列巡禮：RAID 5模式</h1><p>在磁碟陣列的世界中，RAID 5的存在就是為了最佳磁碟利用率，跟其他的方案相較之下，RAID 5可以在相同的磁碟數量下，獲取最大的儲存空間。但相對的，出問題的時候網管人員不太可能輕鬆以對。RAID 5最低的配置為三顆硬碟，且最多只能接受一顆硬碟損毀，要採用這個配置的話，硬碟出事的話最好在第一時間趕快更換，讓新的硬碟快點把資料算回來。</p><h2>軟體式磁碟陣列：RAID 5模式</h2><p>Step 1. 先在虛擬機上面新增三顆硬碟。（RAID 5模式最少要三顆硬碟）</p><p><img src=https://content.slashview.com/img/2019/20191122_01.jpg alt="" /></p><p>Step 2. 開機進去Windows磁碟管理員，先確認有這三顆硬碟的存在，既然都來了就將它格式化為GPT格式吧。</p><p><img src=https://content.slashview.com/img/2019/20191122_02.jpg alt="" /></p><p>Step 3. 其實步驟2這個動作非必要，重點是確認一下你的磁碟應該要處於「未配置」（unallocated）的狀態。</p><p><img src=https://content.slashview.com/img/2019/20191122_03.jpg alt="" /></p><p>Step 4. Windows 10的磁碟管理員其實不會讓你直接設定RAID 5磁碟陣列，要買Windows Server的版本才會開放，不過，山不轉路轉，Windows在控制台的儲存空間中，還是有幫我們留一扇後門。</p><p><img src=https://content.slashview.com/img/2019/20191122_04.jpg alt="" /></p><p>Step 5. 請到控制台＞系統及安全性＞儲存空間，點選「建立新集區與儲存空間」。</p><p><img src=https://content.slashview.com/img/2019/20191122_05.jpg alt="" /></p><p>Step 6. 由於你要動到硬體設備的變更，因此Windows需要驗證一下你是否真的要做？</p><p><img src=https://content.slashview.com/img/2019/20191122_06.jpg alt="" /></p><p>Step 7. 找到三台可以使用的硬碟機。（有分割區的會被視為不可用磁碟機喔！）</p><p><img src=https://content.slashview.com/img/2019/20191122_07.jpg alt="" /></p><p>Step 8. 備援類型設定：同位（Parity），並自己調整輸入框中的儲存空間大小，最佳的狀態是讓「包含備援」容量等於「總集區」容量，調整完後你會發現，儲存空間約略等於N-1顆硬碟的容量。</p><p><img src=https://content.slashview.com/img/2019/20191122_08.jpg alt="" /></p><p>Step 9. 接著回到主畫面，就可以看到一個儲存集區已經被設定完成，也可以觀察到有哪些磁碟機被加入到這個集區。另外有一個重點就是集區顯示成綠色的，這代表現在這個集區工作正常。</p><p><img src=https://content.slashview.com/img/2019/20191122_09.jpg alt="" /></p><p>Step 10. 到磁碟管理員中看一下，可以發現E磁碟已經被正確的掛載了。</p><p><img src=https://content.slashview.com/img/2019/20191122_10.jpg alt="" /></p><p>Step 11. 讓我們在E磁碟機中，存入一個文字檔案，來實驗一下當一顆硬碟毀掉的時候會發生甚麼事情。</p><p><img src=https://content.slashview.com/img/2019/20191122_11.jpg alt="" /></p><p>Step 12. 去虛擬機中，把第三顆硬碟移除，假設硬碟已經壞掉了。</p><p><img src=https://content.slashview.com/img/2019/20191122_12.jpg alt="" /></p><p>Step 13. 再度開機進去儲存空間中可以看到，標籤變成黃色的警告了，看一下實體硬碟可以發現Windows試圖警告我們第三顆硬碟有問題。</p><p><img src=https://content.slashview.com/img/2019/20191122_13.jpg alt="" /></p><p>Step 14. 回到檔案總管中，我們打開E磁碟機中的文字檔案，發現盡管有一顆硬碟已經掛掉，但是檔案仍然可以被取出且內容正確無誤。</p><p><img src=https://content.slashview.com/img/2019/20191122_14.jpg alt="" /></p><p>※ RAID 5的設定與容錯能力已經在此被驗證完成。</p><h2>在RAID 5模式下，如何將壞掉的硬碟抽換成健康的硬碟？</h2><p>當我們發現磁碟陣列有硬碟亮燈壞掉，當然就是趕快把備品拿出來救援，假設我們買了一顆新的硬碟。</p><p>Step 1. 在虛擬機中裝上一顆全新的硬碟。</p><p><img src=https://content.slashview.com/img/2019/20191122_15.jpg alt="" /></p><p>Step 2. 再度開機進去儲存空間中依然可以看到，標籤還是黃色的警告，剛才插入的新硬碟也沒有出現在畫面上。此時請點選「變更設定」。</p><p><img src=https://content.slashview.com/img/2019/20191122_16.jpg alt="" /></p><p>Step 3. 點選「新增磁碟機」。</p><p><img src=https://content.slashview.com/img/2019/20191122_17.jpg alt="" /></p><p>Step 4. 畫面會出現剛才我們新增的那顆硬碟，請點選「新增磁碟機」。</p><p><img src=https://content.slashview.com/img/2019/20191122_18.jpg alt="" /></p><p>Step 5. 回到主畫面，會看到消失的第三顆硬碟警告之外，下面也多了第四顆硬碟已經被抓到且上線。（其實正常大量資料已經寫入的狀況下，在這個步驟時Windows將會不斷的運算，將本來應該放在第三顆硬碟的資料寫入到第四顆硬碟）</p><p><img src=https://content.slashview.com/img/2019/20191122_19.jpg alt="" /></p><p>Step 6. 點選壞掉的第三顆硬碟後方的「移除」功能後，會跳到這個確認「移除此磁碟機」的畫面。</p><p><img src=https://content.slashview.com/img/2019/20191122_20.jpg alt="" /></p><p>Step 7. 回到主畫面後，可以看到變成綠色標籤，表示一切已經恢復正常運作。</p><p><img src=https://content.slashview.com/img/2019/20191122_21.jpg alt="" /></p><p>Step 8. 回到檔案總管看一下測試檔案，發現內容依然是正確的，這代表RAID 5磁碟陣列架構已經在我們的修復下，回復到正常的工作水準啦！</p><p><img src=https://content.slashview.com/img/2019/20191122_22.jpg alt="" /></p><h3>Windows RAID軟體式磁碟陣列建置系列文章</h3><ol><li><a href=/archive2019/20191114.html>Windows軟體式磁碟陣列巡禮：JBOD模式</a></li><li><a href=/archive2019/20191115.html>Windows軟體式磁碟陣列巡禮：RAID 0模式</a></li><li><a href=/archive2019/20191116.html>Windows軟體式磁碟陣列巡禮：RAID 1模式</a></li><li><a href=/archive2019/20191122.html>Windows軟體式磁碟陣列巡禮：RAID 5模式</a></li><li><a href=/archive2019/20191125.html>Windows軟體式磁碟陣列巡禮：RAID 10模式</a></li></ol><h6>Windows RAID Create Build RAID5 SoftwareDiskArrayMode</h6></main><footer></footer><script src=/.file/site.js></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7039045520564660"></script></body></html>