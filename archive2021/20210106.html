<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>利用C#字串插值功能，讓script標籤更好躲過編譯器檢查</h1><p>C# 6.0的字串插值（String Interpolation）是我個人超級喜歡使用的功能，也有人將中文翻譯為「字串插補」、「字串內插補點」等。此篇文章要討論的是由於這個功能的出現，改變了我們傳統上在那邊組合字串的行為，當然也可以順道改變在ASP.NET Code Inline模式下為了欺騙編譯器，在那邊彆扭的組合Client端的HTML script標籤的行為。</p><p>可能會有人說，不應該在程式碼裡面使用字串組合Javascript，要用正規的管道例如透過Page.ClientScript.RegisterClientScriptBlock來進行，可是我就是不喜歡這個機制，且我自己的框架中已經有針對Javascript打造更便利更有彈性的寫入方式了。</p><h2>ASP.NET Code Inline模式撰寫<code>&lt;script></code>標籤寫法</h2><p>為了閃避編譯器對於Server Side標籤的混淆，大概只能這樣寫...</p><pre><code class=language-cs>string cJS = "&lt;script>alert('Hello!');" + "&lt;" + "/script>";
</code></pre><h2>ASP.NET Code Inline模式撰寫<code>&lt;script></code>標籤寫法（利用字串插值）</h2><p>有了字串插值（String Interpolation）寫法變得超精簡，更好閱讀（這篇文章簡單的JS看不出明顯差異），尤其在複雜的字串組合狀態下，更能凸顯這樣寫法的優越。</p><pre><code class=language-cs>string cJS = $"&lt;script>alert('Hello!');{'&lt;'}/script>";
</code></pre><p>若有跟我一樣需求的使用者，強烈建議採用這個寫法比較順暢喔。</p><h6>C# StringInterpolation ASP.NET CodeInline Insert Add Combine Define Javascript HTML Script ScriptTag</h6></main><footer></footer><script src=/.file/site.js></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7039045520564660"></script></body></html>