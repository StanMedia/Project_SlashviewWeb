<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>Windows Server記憶體暴增，卻找不到是哪隻程式引發？</h1><p>近日在管理一台Windows Server完成後，隨手開一下工作管理員看看系統效能如何，不看不知道一看嚇一跳，記憶體竟然快爆炸了！這台伺服器基本上處於非巔峰使用狀態，當前的連線數很少的，也沒有安裝任何SQL資料庫等會引發高記憶體堆疊的軟體，怎麼可能有這麼高的記憶體使用量呢？</p><p>推測可能是Windows不知道哪個作業引爆memory leak，因此當下立斷重新開機想要解決這一局，沒想到重開機後記憶體依然爆炸，這可不得了！從下面的圖片可以看到8GB的記憶體已經被吃掉7.1GB。</p><p><img src=https://content.slashview.com/img/2021/20211005_01.jpg alt="" /></p><p>打開處理程序的頁籤想看看哪隻程式在搞鬼，一看心都涼了，最有可能的服務IIS Worker Process也不過吃你不到100MB！</p><p><img src=https://content.slashview.com/img/2021/20211005_02.jpg alt="" /></p><p>趕緊去微軟官網下載RamMap工具來進行細部調查，這下發現兇手了，叫做「Driver Locked」。</p><p><img src=https://content.slashview.com/img/2021/20211005_03.jpg alt="" /></p><p>找到以前Microsoft TechNet論壇上的一篇文章： <a href="https://social.technet.microsoft.com/Forums/azure/en-US/d4f97391-a70c-47b1-ab05-bab4754868ac/hyperv-dynamic-memory-driver-locked?forum=winserverhyperv">Hyper-V Dynamic memory, Driver Locked</a>，裡面明白的指出是因為 VM / Hyper-V 的Dynamic Memory（動態記憶體）配置所產生的「誤解」，要嘛就把它關掉，要嘛就接受這個現象的存在。</p><p>虛驚一場的結束這次調查。</p><h6>WindowsServer RamUsage MemoryUsage TooLarge TooHigh CanNotFoundAnyProgram RamDump RamMap DriverLocked</h6></main><footer></footer><script src=/.file/site.js></script></body></html>