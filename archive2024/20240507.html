<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>在Ubuntu安裝Microsoft SQL Server 2022</h1><p>單純記錄在Linux環境中（Ubuntu 22.04）安裝Microsoft SQL Server 2022的歷程，沒有啥營養。</p><h2>先切換到root</h2><p>先把每個步驟都在那邊煩人的sudo消除掉，直接切換到root。</p><pre><code class=language-txt>sudo -i
</code></pre><h2>匯入公開存放庫 GPG 金鑰</h2><p>依據微軟官方文件把GPG金鑰匯入儲存至主機：</p><pre><code class=language-txt>curl -fsSL https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --dearmor -o /usr/share/keyrings/microsoft-prod.gpg
</code></pre><p>更新公開金鑰簽名：</p><pre><code class=language-txt>curl https://packages.microsoft.com/keys/microsoft.asc | sudo tee /etc/apt/trusted.gpg.d/microsoft.asc
</code></pre><p>如果你沒有更新公開金鑰簽名，會在<code>apt-get update</code>時期噴出下列類似金鑰簽名失敗錯誤：</p><pre><code class=language-txt>W: GPG error: https://packages.microsoft.com/ubuntu/22.04/mssql-server-2022 jammy InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY EB3E94ADBE1229CF
</code></pre><h2>手動下載並註冊SQL Server Ubuntu存放庫</h2><p>指定<code>mssql-server-2022</code>版本：</p><pre><code class=language-txt>curl -fsSL https://packages.microsoft.com/config/ubuntu/22.04/mssql-server-2022.list | sudo tee /etc/apt/sources.list.d/mssql-server-2022.list
</code></pre><h2>透過apt-get安裝SQL Server 2022</h2><pre><code class=language-txt>apt-get update
apt-get install -y mssql-server
</code></pre><h2>設定SQL Server 2022</h2><p>進入設定模式</p><pre><code class=language-txt>/opt/mssql/bin/mssql-conf setup
</code></pre><p>測試用途建議選擇<code>Developer</code>版本、<code>允許</code>授權協議，並且設定<code>密碼</code>，設定後系統會自動幫你把SQL Server運行起來。</p><h2>設定SQL Server的定序</h2><p>首先要將SQL Server執行狀態進行關閉</p><pre><code class=language-txt>systemctl stop mssql-server
</code></pre><p>設定定序，基本上台灣最常見的預設值就是設定<code>Chinese_Taiwan_Stroke_CI_AS</code>，亦即：筆畫排序、不區分大小寫、區分腔調字。</p><pre><code>/opt/mssql/bin/mssql-conf set-collation

Enter the collation: Chinese_Taiwan_Stroke_CI_AS
</code></pre><p>設定之後重新將SQL Server開啟即可</p><pre><code class=language-txt>systemctl start mssql-server
</code></pre><h2>查看SQL Server 2022運行狀態</h2><p>透過下列指令，如果在Console中有看到綠色的<code>active (runnung)</code>就代表有跑起來了。</p><pre><code class=language-txt>systemctl status mssql-server
</code></pre><p>重新啟動SQL Server</p><pre><code class=language-txt>systemctl restart mssql-server
</code></pre><p>關閉SQL Server</p><pre><code class=language-txt>systemctl stop mssql-server
</code></pre><p>如果伺服器上面有SQL Server的且需要關機的話，最好先將SQL Server服務停止再進行關機比較不會造成寫入中斷之類的問題。</p><pre><code class=language-txt>systemctl stop mssql-server
shutdown -h now
</code></pre><h2>透過SSMS進行連線測試</h2><p>首先在Ubuntu查詢本機IP，取得IP位址後以便連線SSMS。</p><pre><code class=language-txt>ip address
</code></pre><p>開啟SSMS輸入<code>sa</code>帳號與剛才設定的<code>密碼</code>，證明進行資料庫的連線沒有錯誤。（若有問題請檢查防火牆是否有阻擋）</p><p><img src=https://content.slashview.com/img/2024/20240507_01.jpg alt="" /></p><h6>Linux Ubuntu Install Setup MicrosoftSqlServer MsSQL MS-SQL Mssql-Server 2017 2019 2022 StepByStep</h6></main><footer></footer><script src=/.file/site.js></script></body></html>