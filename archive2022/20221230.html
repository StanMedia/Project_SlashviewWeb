<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>如何在.NET Framework 4.8的Console專案中，使用C#新版本編譯器及語法</h1><p>被微軟拋棄的.NET Framework到最終4.8版本後，標準可以使用的C#版本為C# 7.3，詳見：<a href=https://learn.microsoft.com/zh-tw/dotnet/csharp/language-reference/configure-language-version>C# 語言版本控制 / Configure Language Version</a>。那麼，是否可以在.NET Framework 4.8 Console專案中使用更高的C#版本語法呢（C# 8.0、C# 9.0 ...）？其實是可以的，只是被微軟封印起來，這篇文章教你怎麼開啟。</p><h2>在.NET Framework 4.8 Console專案中使用C#新版本編譯器及語法</h2><p>Step 1. 決定好你要使用的C#版本號，以及對應的<a href=https://github.com/dotnet/roslyn/blob/main/docs/wiki/NuGet-packages.md#versioning>Microsoft.Net.Compilers.Toolset版本號</a>，以現在的時間來說，C# 9.0最後的Roslyn版本號是3.11。</p><p>Step 2. 在Visual Studio啟用nuget下載，鍵入「Microsoft.Net.Compilers.Toolset」，選擇要安裝的版本號並套用到你想套用的專案。</p><p><img src=https://content.slashview.com/img/2022/20221230_01.jpg alt="" /></p><p>Step 3. 接下來有很多網站都會教你去「專案＞屬性視窗＞建置＞進階」下拉選擇C#編譯器版本號，但這個步驟在我們現行的4.8環境中基本上是沒用的，至少在Visual Studio 2022進去後會發現被鎖定成「根據架構版本自動選取」，如下圖：</p><p><img src=https://content.slashview.com/img/2022/20221230_02.jpg alt="" /></p><p>Step 4. 正確的作法是去找到你這個專案的設定檔（*.csproj），用編輯器打開後找到「PropertyGroup」節點，並在裡面添加「LangVersion」元素。至於LangVersion裡面要填寫的值，一樣可以在這個網頁：<a href=https://learn.microsoft.com/zh-tw/dotnet/csharp/language-reference/configure-language-version>C# 語言版本控制 / Configure Language Version</a>找到資訊，若不想花腦筋的話，建議填寫「latest」即可。</p><p><img src=https://content.slashview.com/img/2022/20221230_03.jpg alt="" /></p><p>ＸＭＬ代碼整理如下：</p><pre><code class=language-xml>&lt;PropertyGroup>
  &lt;LangVersion>latest&lt;/LangVersion>
&lt;/PropertyGroup>
</code></pre><p>Step 5. 新增完後儲存，重新開啟Visual Studio，就可以發現可以使用你想要用的新版C#語法與編譯器了。</p><h6>Microsoft Visual Studio .NetFramework 4.8 4.7 Console C#Version C#NewestVersion C#NewestCompiler C#NewestSyntax C#8.0 C#9.0 C#10.0 C#11.0</h6></main><footer></footer><script src=/.file/site.js></script></body></html>