<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>在Windows Server 2016 SMB檔案分享設定（網芳資料夾分享）</h1><p>之前主力的作業系統是Windows Server 2003／2008（R2），對於檔案分享的設定方式始終停留在資料夾＞右鍵去共用資料夾，當然還是可以用啦，不過開始有很多設定慢慢地被移走了，自從Windows Server 2012後，微軟已經開始慢慢地把所有的伺服器設定，集成在「伺服器管理員」身上了，這篇文章就是在討論如何在「伺服器管理員」的介面裡面，去進行SMB ver.3等級的檔案資料夾分享設定。</p><p>前提</p><p>如果你想要使用Windows Server 2016的「伺服器管理員」中的SMB檔案分享設定，那就要先把伺服器角色提升到「檔案伺服器 」等級，請至少安裝「存放服務」、「檔案伺服器」以及「檔案伺服器資源管理員」這三個角色。</p><h2>在Windows Server 2016 中設置SMB檔案分享</h2><p>Step 01. 進入伺服器管理員＞檔案和存放服務＞共用頁籤，並在中央空白處點選右鍵，新增一個共用。</p><p><img src=https://content.slashview.com/img/2017/20170630_01.jpg alt="" /></p><p>Step 02. 選擇「SMB共用-進階」。</p><p><img src=https://content.slashview.com/img/2017/20170630_02.jpg alt="" /></p><p>Step 03. 選擇「輸入自訂路徑」。</p><p><img src=https://content.slashview.com/img/2017/20170630_03.jpg alt="" /></p><p>Step 04.輸入「共用名稱」，即為想要分享給對方電腦的資料夾名稱。</p><p><img src=https://content.slashview.com/img/2017/20170630_04.jpg alt="" /></p><p>Step 05. 勾選「允許對共用進行快取」，這樣做的效能會比較好一點點；至於BranchCache要另外裝套件，所以這邊是以灰色DISABLE來顯示。</p><p><img src=https://content.slashview.com/img/2017/20170630_05.jpg alt="" /></p><p>Step 06. 接著要自訂權限一下。</p><p><img src=https://content.slashview.com/img/2017/20170630_06.jpg alt="" /></p><p>Step 07. 先切換到「共用」頁籤，把你要指定存取的User Name帳號表列於其中，當然你的存取權限也可以在這邊進行指定。建議這個地方也把Administrator加入，如此一來管理者比較好在檔案總管裡面，透過輸入UNC Path來直接查看到底分享了哪些東西、以及目錄結構。</p><p><img src=https://content.slashview.com/img/2017/20170630_07.jpg alt="" /></p><p>Step 08. 返回「權限」頁籤，這裡建議把主要使用分享資料夾的「使用者」加入其中，並允許其可以完全存取這個資料夾。 <img src=https://content.slashview.com/img/2017/20170630_08.jpg alt="" /></p><p>這邊的設定最主要是在解決下列這種情況：當Administrator權限的人，在這個資料夾下面新增一個純文字檔案，然後「使用者」在遠端的電腦透過分享資料夾或取了這個檔案開啟後，進行編輯會發生無法存回的問題，盡管已經把網路分享資料夾的讀寫權限設定給這個「使用者」，但因為NTFS的權限上，這個檔案仍然被Administrator（以及系統成員）擁有，因此就算網路芳鄰資料夾已經開放權限了，仍然會發生無法回存的問題。</p><p><img src=https://content.slashview.com/img/2017/20170630_09.jpg alt="" /></p><p>將「使用者」設置在這個資料夾的NTFS基本權限中，使其可以擁有資料夾的絕對權力，就可以完全規避掉這個問題。（但這也會讓風險大幅提升，請自行斟酌設定）</p><p>Step 09. 指定資料夾管理屬性，在這邊我們不進行任何的指定動作。</p><p><img src=https://content.slashview.com/img/2017/20170630_10.jpg alt="" /></p><p>Step 10. 若有需要進行資料夾的配額（Quota）動作，可以在這邊設定。</p><p><img src=https://content.slashview.com/img/2017/20170630_11.jpg alt="" /></p><p>Step 11. 最後會將所有的設定資訊列出讓你確認，沒問題就點選建立。</p><p><img src=https://content.slashview.com/img/2017/20170630_12.jpg alt="" /></p><p>Step 12. 完成後回到「伺服器管理員」畫面，可以在畫面中間看到TEST資料夾已經被分享出來啦！</p><p><img src=https://content.slashview.com/img/2017/20170630_13.jpg alt="" /></p><p>若你有興趣，也可以到進階防火牆那邊看看，你發現剛才設定的過程中，網路芳鄰（分享資料夾）的相關通訊埠號的防火牆已經被偷偷地開啟了喔。</p><p>※註：SMB檔案共用（網路芳鄰、分享資料夾）在Hyper-V後期已經被實作到ver.3版本，對於傳輸效能、部屬能力、可用性等方面功能均被大幅的強化與提升，已非昔日吳下阿蒙，不可等閒視之。本篇文章所教學的東西，只是示範SMB協定的基礎而已，並沒有使用到SMB v3的任何功能。</p><h6>SMB ServerMessageBlock Setup Install FolderShares</h6></main><footer></footer><script src=/.file/site.js></script></body></html>