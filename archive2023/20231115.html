<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>VMware虛擬機在Windows開機尚未登入前自行喚起運作（背景服務）</h1><p>有些時刻我們想要讓安裝好的虛擬機，在電腦打開電源但是還沒登入進Windows之前，就自動跑起來在背景服務，這種需求其實就是Windows Services，但我們沒有辦法要求VMware提供GuestOS as services的功能，所以只好把目光投向工作排程器（Windows Task Scheduler）。</p><h2>透過工作排程器，讓虛擬電腦自動在背景跑起來</h2><p>Step 1. 打開<code>工作排程器</code>，新增一個全新的工作。</p><p>Step 2. 在<code>一般</code>的頁籤下，使用者帳戶選擇<code>當下你正在運作Windows的身分</code>即可，記得要把選項選取成<code>不論使用者登入與否均執行</code>。</p><p><img src=https://content.slashview.com/img/2023/20231115_01.jpg alt="" /></p><p>Step 2. 在<code>觸發程序</code>的頁籤下，開始工作選擇<code>啟動時</code>。</p><p><img src=https://content.slashview.com/img/2023/20231115_02.jpg alt="" /></p><p>Step 3. 在<code>動作</code>的頁籤下，動作選擇<code>啟動程式</code>，程式或指令碼指定到<code>vmrun.exe</code>的所在路徑下。</p><pre><code class=language-txt>C:\Program Files (x86)\VMware\VMware Workstation\vmrun.exe
</code></pre><p>引數的格式如下：</p><pre><code class=language-txt>-T ws start "C:\虛擬機路徑\虛擬機.vmx" nogui
</code></pre><p>值得注意的是最後的參數<code>nogui</code>加上後，據說會占用比較少的資源，也就是啟動的速度會快上一些。</p><p><img src=https://content.slashview.com/img/2023/20231115_03.jpg alt="" /></p><p>大致上這樣就可以了，重開機後先不要登入，可以測試看看你的VMware伺服器是否真的會自己在背景跑起來。</p><h3>心得</h3><p>在背景啟動的VMware運作起來還蠻順暢的，缺點是當我們登入Windows想要透過Console管理這台虛擬機的時候，會發現連畫面螢幕都消失了（無論有沒有加上<code>nogui</code>都有不同的問題發生），這個到目前為止好像沒有一個比較好的解法，唯一可以接管的方式就是對其斷電強制重新開機，若後續有解法的話再上來更新。</p><h6>VMware Unix Linux Ubuntu CentOS Windows WithoutLogin AsWindowsServices PowerOn SystemOsReady AutoRun AutoInitial AutoBootOn</h6></main><footer></footer><script src=/.file/site.js></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7039045520564660"></script></body></html>