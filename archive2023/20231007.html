<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1" /><link href=/.file/site.css rel=stylesheet /><script src=/.include/jquery/jquery.min.js></script></head><body><header></header><main><h1>RouterOS：MikroTik路由器的接入中華電信PPPoE的設定</h1><p>中華電信的MODEMM俗稱：<code>小烏龜</code>、<code>ATU-R</code>、<code>DSL Modem</code>、<code>ADSL Modem</code>、<code>VDSL Modem</code>等，大部分的機型都會擁有硬體撥接（PPPoE）的能力，也具備Router的封包分派NAT能力，但是需要透過破解的方式來運作。但是，往往因為成本考量，這些小烏龜的硬體或是散熱用料都很差，若所處環境比較惡劣，通常會發生熱當機問題。</p><p>發生熱當機需要重新對硬體開機的麻煩就算了，若最後整台燒掉還要請電信公司派工程師來維修往往曠日廢時，最重要的是來維修就是整台換掉，原本設定的那些網路配置參數全部都消失了，又要重新來一次。</p><p>有鑑於此，讓中華電信的MODEM回歸到他原本的<code>訊號傳遞</code>功能才是正道。</p><h2>MikroTik RB4011iGS+RM Router OS路由器</h2><p>因為家裡人口眾多使用的上網設備繁雜，加上IOT的設備日益增多，所以想要一次性的直上比較高等級的路由器，因此購入了這台<code>MikroTik RB4011iGS+RM</code>軟體路由器，作業系統跑<code>Router OS</code>。它的功能其實超強，被我拿來做硬體撥接、NAT、DHCP...其實有點<code>大材小用</code>，但對於我來說，花費<code>低於一萬元</code>但可省去日後頻繁的網路檢修時間，其實是很划算的。</p><p><img src=https://content.slashview.com/img/2023/20231007_01.jpg alt="" /></p><h2>MikroTik設定PPPoE硬撥接</h2><p>Step 1. 插上電源開機，將你的網路卡設定成<code>192.168.88.2</code>靜態IP（Static IP），然後透過一條網路線插入到主機的<code>第2個網路</code>孔，以SwitchHub的型態進行對連。</p><p><img src=https://content.slashview.com/img/2023/20231007_02.jpg alt="" /></p><p>Step 2. 原廠提供了<code>Winbox</code>與<code>Browser</code>兩種連線方式，且建議採用<code>Winbox</code>較為適配（有些中文的檔名、設定參數不會變成亂碼），但因為我個人比較偏好<code>Browser</code>，因此之後所有的設定我都是走瀏覽器。請在瀏覽器網址輸入主機的預設IP：<code>192.168.88.1</code>，就會看到下方連線帳號密碼，密碼位於主機的下方產品資訊貼紙上，請自己翻閱並輸入。對了，第一次進入後會強制要求變更密碼喔。</p><p><img src=https://content.slashview.com/img/2023/20231007_03.jpg alt="" /></p><p>Step 3. 請將<code>小烏龜</code>拉一條線接入<code>第1個網路</code>孔，這個網路口被<code>預設成WAN</code>孔。此外，並請同時確認<code>小烏龜</code>已經<code>脫離</code>硬體撥接PPPoE的修改設定。</p><p>Step 4. 系統在要求強制變更密碼後，會自動引導到<code>Quick Set</code>環節，使用者可以在這邊設定<code>PPPoE</code>硬撥接資訊，如果有確定連線後，系統的<code>PPPoE Status</code>狀態會顯示成<code>connected</code>，你可以在此觀察到外部的<code>IP Address</code>等資訊。</p><p><img src=https://content.slashview.com/img/2023/20231007_04.jpg alt="" /></p><h2>MikroTik設定DHCP與NAT</h2><p>Step 1. 設定DHCP以利自動IP分派：因為電信公司的<code>小烏龜</code>大部分都是以<code>192.168.0.1</code>或<code>192.168.1.1</code>為預設大宗，為了追求維修後隨插即用，因此故意閃避掉同網段的複雜設定議題，選擇以<code>192.168.2.1</code>為路由器內網網段。</p><p>Step 2. DHCP Server請<code>勾選</code>，Range我自己是從<code>192.168.2.11</code>～<code>192.168.2.254</code>，前面九個IP我會保留給特定的主機使用。</p><p>Step 3. 最後，當然要啟用NAT服務啊，請<code>勾選</code>NAT。</p><p><img src=https://content.slashview.com/img/2023/20231007_05.jpg alt="" /></p><h2>MikroTik設定DNS Server</h2><p>DHCP就是一種懶人服務，因此指派正確的DNS來解析網域名稱是很重要的，當我們去更改<code>192.168.2.1</code>為路由器內網網段後，MikroTik會把DNS主機的參數洗掉，因此我們需要去重新再指定一次。</p><p>Step 1. 請到<code>WebFig</code>＞<code>IP</code>＞<code>DHCP Server</code>，看到我們剛才新增的內網區段<code>192.168.2.0/24</code>，這時候可以看到DNS Servers被錯置成<code>192.168.2.1</code>。</p><p><img src=https://content.slashview.com/img/2023/20231007_06.jpg alt="" /></p><p>Step 2. 點擊進入後，將DNS主機改回<code>168.95.192.1</code>（中華電信）及<code>8.8.8.8</code>（Google），此外<code>1.1.1.1</code>（Cloudflare）也是一個不錯的選擇，雖然不久之前才剛出過大包大斷線🤣。</p><p><img src=https://content.slashview.com/img/2023/20231007_07.jpg alt="" /></p><h2>MikroTik設定NTP Client</h2><p>此外，我有發現一個不太需要修正但是可以修正的設定，就是在<code>IP</code>＞<code>NTP Client</code>的第二個NTP Server好像預設值有被設定錯誤，請把<code>118.163.81.6</code>改成<code>118.163.81.61</code>（time.stdtime.gov.tw）即可。圖片中另外一個NTP Server <code>211.22.103.158</code>是clock.stdtime.gov.tw。</p><p><img src=https://content.slashview.com/img/2023/20231007_08.jpg alt="" /></p><h3>相關參考</h3><ul><li><a href=/archive2014/20140107.html>Alcatel T07A/T07AW硬體撥接與DHCP設定</a></li><li><a href=/archive2016/20160907.html>SMC 7904W硬體撥接、DHCP及WiFi開啟設定</a></li><li><a href=/archive2023/20231007.html>RouterOS：MikroTik路由器的接入中華電信PPPoE的設定</a></li><li><a href=/archive2023/20231008.html>RouterOS：MikroTik路由器的安全設定、設定檔備份還原與韌體升降級的方法</a></li><li><a href=/archive2023/20231009.html>RouterOS：MikroTik路由器觀測相關數據</a></li></ul><h6>MikroTik RouterOS Router Setup Setting ADSL VDSL PPPoE NAT DHCP DNS</h6></main><footer></footer><script src=/.file/site.js></script></body></html>